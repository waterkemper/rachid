# CORS fix for api.orachid.com.br
# Add these directives inside the <VirtualHost *:443> block of orachid-api-ssl.conf
# (after the ProxyPass directives, before the Security headers section)
#
# IMPORTANT: Requires mod_headers and mod_setenvif to be enabled:
#   sudo a2enmod headers
#   sudo a2enmod setenvif
#
# After editing, reload Apache:
#   sudo systemctl reload apache2
#   # or: sudo apachectl graceful

  # CORS: Allow requests from frontend domains
  SetEnvIf Origin "^https://(www\.)?orachid\.com\.br$" CORS_ALLOW_ORIGIN=$0
  Header always set Access-Control-Allow-Origin %{CORS_ALLOW_ORIGIN}e env=CORS_ALLOW_ORIGIN
  Header always set Access-Control-Allow-Credentials "true" env=CORS_ALLOW_ORIGIN
  Header always set Access-Control-Allow-Methods "GET, POST, PUT, PATCH, DELETE, OPTIONS" env=CORS_ALLOW_ORIGIN
  Header always set Access-Control-Allow-Headers "Content-Type, Authorization, X-Requested-With, Accept, Origin" env=CORS_ALLOW_ORIGIN
  Header always set Access-Control-Max-Age "86400" env=CORS_ALLOW_ORIGIN
